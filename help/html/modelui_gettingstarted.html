
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>ModelUI - Getting Started</title><meta name="generator" content="MATLAB 9.9"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2021-01-16"><meta name="DC.source" content="modelui_gettingstarted.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>ModelUI - Getting Started</h1><!--introduction--><p>The steps below outline how to setup a bespoke application of ModelUI by modifying the default UI. How to develop more complex UIs is explained in the <a href="matlab:open_manual">ModelUI manual</a>.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#3">Main UI</a></li><li><a href="#5">Data import</a></li><li><a href="#7">Input parameters</a></li><li><a href="#8">Models</a></li><li><a href="#10">See Also</a></li></ul></div><div><ol><li>Decide on what components are needed. These might include: <a href="br">br</a>   o UI - the main interface for the application  <a href="br">br</a>   o Data import - load different types of data <a href="br">br</a>   o Input parameters - define any parameters needed for the application <a href="br">br</a>   o Model(s) - initialise and call any models to be run by the application.  <a href="br">br</a></li><li>Give names to each component, e.g.: <a href="br">br</a>   ModelUI, demoData, demoProps, demoModel</li><li>Copy the class templates for the components from here to your working folder</li><li>Create classes for each component by editing the templates as set out for each template below.</li></ol></div><p>Templates for the four main components are provided in the ModelUI/utils folder. The templates provide the code for each component and the comments highlight where the files need to be edited to adapt the templates to a different application.</p><h2 id="3">Main UI</h2><p>Define a classname that reflects the intended application. In the setMUI method define the components of the application, such as the model and input parameter classes used that define the ModelInputs property and the plottig and statistics options to include in the respective UIs. The setTabProperties method has to be edited to match the class names for the parameter inputs and the position for each parameter set on the tab. Finally, the calls to input classes and to run the model need to be edited to the class and method names to be used .</p><pre class="language-matlab">
<span class="keyword">classdef</span> UseModelUI_template &lt; ModelUI                       <span class="comment">% &lt;&lt; Edit to classname</span>
<span class="comment">%</span>
<span class="comment">%-------class help---------------------------------------------------------</span>
<span class="comment">% NAME</span>
<span class="comment">%   UseModelUI_template.m</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Main GUI for a bespoke implementation of ModelUI.</span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   Abstract class muiModelUI.m and tools provided in muitoolbox</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jan 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% </span>
    <span class="keyword">properties</span>
        <span class="comment">%Properties defined in muiModelUI that need to be defined in setGui</span>
        <span class="comment">% ModelInputs  %classes required by model: used in isValidModel check </span>
        <span class="comment">% DataUItabs   %struct to define type of muiDataUI tabs for each use                         </span>
    <span class="keyword">end</span>
    
    <span class="keyword">methods</span> (Static)
        <span class="keyword">function</span> obj = UseModelUI_template                   <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%constructor function initialises GUI          </span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Definition of GUI Settings</span>
<span class="comment">%--------------------------------------------------------------------------  </span>
    <span class="keyword">methods</span> (Access = protected)
        <span class="keyword">function</span> obj = setMUI(obj)
            <span class="comment">%initialise standard figure and menus    </span>
            <span class="comment">%classes required to run model             </span>
            <span class="comment">%format:                                         % &lt;&lt; Edit to model and input parameters classnames </span>
            <span class="comment">%obj.ModelInputs.&lt;model classname&gt; = {'Param_class1',Param_class2',etc}</span>
            obj.ModelInputs.Model_template = {<span class="string">'ParamInput_template'</span>};
            <span class="comment">%tabs to include in DataUIs for plotting and statistical analysis</span>
            <span class="comment">%select which of the options are needed and delete the rest</span>
            <span class="comment">%Plot options: '2D','3D','4D','2DT','3DT','4DT'</span>
            obj.DataUItabs.Plot = {<span class="string">'2D'</span>,<span class="string">'3D'</span>,<span class="string">'4D'</span>,<span class="string">'2DT'</span>,<span class="string">'3DT'</span>,<span class="string">'4DT'</span>};  
            <span class="comment">%Statistics options: 'General','Timeseries','Taylor','Intervals'</span>
            obj.DataUItabs.Stats = {<span class="string">'General'</span>,<span class="string">'Timeseries'</span>,<span class="string">'Taylor'</span>,<span class="string">'Intervals'</span>};
            
            <span class="comment">%inherit from ModelUI constructor and overload some setup values</span>
            obj.vNumber = <span class="string">'1.0'</span>;   
            obj.vDate   = <span class="string">'Jan 2021'</span>;
            obj. modelName = <span class="string">'UseModelUI_template'</span>;          <span class="comment">% &lt;&lt; Edit to application name</span>
              
            modelLogo = <span class="string">'mui_logo.jpg'</span>;  <span class="comment">%default splash figure - edit to alternative</span>
            initialiseUI(obj,modelLogo); <span class="comment">%initialise menus and tabs                  </span>
        <span class="keyword">end</span>    
        
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Definition of Menu Settings</span>
<span class="comment">%--------------------------------------------------------------------------</span>
        <span class="comment">%Use default settings</span>
        
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Definition of Tab Settings</span>
<span class="comment">%--------------------------------------------------------------------------</span>
        <span class="comment">%Use default settings</span>
        
<span class="comment"> %%</span>
        <span class="keyword">function</span> props = setTabProperties(~)
            <span class="comment">%define the tab and position to display class data tables</span>
            <span class="comment">%props format: {class name, tab tag name, position, ...</span>
            <span class="comment">%               column width, table title}</span>
                                                             <span class="comment">% &lt;&lt; Edit input properties classnames </span>
            props = {<span class="keyword">...</span><span class="comment">                                     % &lt;&lt; Add additional inputs and adjust layout</span>
                <span class="string">'ParamInput_template'</span>,<span class="string">'Inputs'</span>,[0.95,0.48],{180,60},<span class="string">'Input parameters:'</span>};
        <span class="keyword">end</span>      
        
<span class="comment">%% ------------------------------------------------------------------------</span>
<span class="comment">% Callback functions used by menus and tabs</span>
<span class="comment">%-------------------------------------------------------------------------- </span>
        <span class="comment">%Use defaults except:</span>
<span class="comment">        %% Setup menu -----------------------------------------------------</span>
        <span class="keyword">function</span> setupMenuOptions(obj,src,~)
            <span class="comment">%callback functions for data input</span>
            <span class="keyword">switch</span> src.Text
                <span class="keyword">case</span> <span class="string">'Input parameters'</span>                      <span class="comment">% &lt;&lt; Edit to call Parameter Input class</span>
                    ParamInput_template.setParamInput(obj);                             
                    tabsrc = findobj(obj.mUI.Tabs,<span class="string">'Tag'</span>,<span class="string">'Inputs'</span>);
                    InputTabSummary(obj,tabsrc);
                <span class="keyword">case</span> <span class="string">'Imported Data'</span>                         <span class="comment">% &lt;&lt; Edit to call Data Import class</span>
                    DataImport_template.loadData(obj.Cases);
                <span class="keyword">case</span> <span class="string">'Model Constants'</span>
                    obj.Constants = editProperties(obj.Constants);
            <span class="keyword">end</span>
        <span class="keyword">end</span>             
<span class="comment">        %% Run menu -------------------------------------------------------</span>
        <span class="keyword">function</span> runMenuOptions(obj,src,~)
            <span class="comment">%callback functions to run model</span>
            <span class="keyword">switch</span> src.Text                   
                <span class="keyword">case</span> <span class="string">'Run Model'</span>                             <span class="comment">% &lt;&lt; Edit to call Model class</span>
                    Model_tamplate.runModel(obj); 
                <span class="keyword">case</span> <span class="string">'Derive Output'</span>
                    obj.mUI.Manip = muiManipUI.getManipUI(obj);
            <span class="keyword">end</span>            
        <span class="keyword">end</span>                    
    <span class="keyword">end</span>
<span class="keyword">end</span>

</pre><p>For bespoke implementations of the muiModelUI interface use the UseUI_template.m instead (there are important differences in the class constructor method).</p><h2 id="5">Data import</h2><p>For each type of <i>data</i> to be imported, define a classname and edit the template where indicated using the classname. The classname can be generic (e.g. Waves) and the meta-data can be modified to reflect variation in data from different sources (number of variables, file format, etc). This is used extensively in the ModelUI CoastalTools App. In the template provided, edit the call to dstable (line 46) and the file format defined in readInputData (line 67) to match the data being loaded. The Q-Plot tab displays a fixed format plot of the data. This can use the default format or be customised in the tabPlot function.</p><p>At the bottom of the template is the dataDSproperties function. This must be edited to match the data being loaded. Working out the details of the fomrat of the data being loaded helps to ensure that the data is being formatted correctly and defining the metadata defined by the dsproperties stuct ensures that the meta-data is avaialble for subsequent use of the data in plotting, statical analysis, etc.</p><pre class="language-matlab">
<span class="keyword">classdef</span> DataImport_template &lt; muiDataSet                    <span class="comment">% &lt;&lt; Edit to classname</span>
<span class="comment">%</span>
<span class="comment">%-------class help------------------------------------------------------===</span>
<span class="comment">% NAME</span>
<span class="comment">%   DataImport_temaplate.m</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Class to illustrate importing a data set, adding the results to dstable</span>
<span class="comment">%   and a record in a dscatlogue with a method to plot the output</span>
<span class="comment">% USAGE</span>
<span class="comment">%   obj = DataImport_template.loadData(catobj), where catobj is a handle to a dscatalogue</span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   inherits muiDataSet and uses dstable and dscatalogue</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jam 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%    </span>
    <span class="keyword">properties</span>  
        <span class="comment">%inherits Data, RunParam, MetaData and CaseIndex from muiDataSet</span>
        <span class="comment">%Additional properties:  </span>
    <span class="keyword">end</span>
    
    <span class="keyword">methods</span> (Access = private)
        <span class="keyword">function</span> obj = DataImport_template()                 <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%class constructor</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>
    
<span class="comment">%%    </span>
    <span class="keyword">methods</span> (Static)
        <span class="keyword">function</span> loadData(muicat)
            <span class="comment">%read and load a data set from a file</span>
            obj = DataImport_template;                       <span class="comment">% &lt;&lt; Edit to classname</span>
            [data,~,filename] = readInputData(obj);             
            <span class="keyword">if</span> isempty(data), <span class="keyword">return</span>; <span class="keyword">end</span>
           
            <span class="comment">%initialise dsproperties for data</span>
            dsp = dataDSproperties(obj);  
            
            <span class="comment">%do any formatting of data necessary (eg sort out date and time</span>
            <span class="comment">%inputs)</span>
            time = data{1};
            data = data(2:end);
            
            <span class="comment">%load the results into a dstable                 % &lt;&lt; Edit to dimensions of dataset</span>
            dst = dstable(data{:},<span class="string">'RowNames'</span>,time,<span class="string">'DSproperties'</span>,dsp);
            <span class="comment">%if dimensions then extract from input file or load and read</span>
            <span class="comment">% dst.Dimensions.X = dims     </span>
            
            <span class="comment">%assign metadata about data</span>
            dst.Source = filename;
            <span class="comment">%setDataRecord classobj, muiCatalogue obj, dataset, classtype</span>
            setDataRecord(obj,muicat,dst,<span class="string">'data'</span>);           
        <span class="keyword">end</span> 
    <span class="keyword">end</span> 
<span class="comment">%%</span>
    <span class="keyword">methods</span>
        <span class="keyword">function</span> tabPlot(obj,src)
            <span class="comment">%generate plot for display on Q-Plot tab</span>
            
            <span class="comment">%add code to define plot format or call default tabplot using:</span>
            tabDSplot(obj,src);
        <span class="keyword">end</span>   
    <span class="keyword">end</span>
<span class="comment">%%</span>
    <span class="keyword">methods</span> (Access = private)
        <span class="keyword">function</span> [data,header,filename] = readInputData(~)   <span class="comment">% &lt;&lt; Edit to file format being used</span>
            <span class="comment">%read wind data (read format is file specific).</span>
            [fname,path,~] = getfiles(<span class="string">'FileType'</span>,<span class="string">'*.txt'</span>);
            filename = [path fname];
            dataSpec = <span class="string">'%d %d %s %s %s %s'</span>; 
            nhead = 1;     <span class="comment">%number of header lines</span>
            [header,data] = readinputfile(filename,nhead,dataSpec);
        <span class="keyword">end</span>       
<span class="comment">%%        </span>
        <span class="keyword">function</span> dsp = dataDSproperties(~)
            <span class="comment">%define the metadata properties for the demo data set</span>
            dsp = struct(<span class="string">'Variables'</span>,[],<span class="string">'Row'</span>,[],<span class="string">'Dimensions'</span>,[]);  
            <span class="comment">%define each variable to be included in the data table and any</span>
            <span class="comment">%information about the dimensions. dstable Row and Dimensions can</span>
            <span class="comment">%accept most data types but the values in each vector must be unique</span>
            
            <span class="comment">%struct entries are cell arrays and can be column or row vectors</span>
            dsp.Variables = struct(<span class="keyword">...</span>
                <span class="string">'Name'</span>,{<span class="string">'Var1'</span>,<span class="string">'Var2'</span>},<span class="keyword">...</span><span class="comment">                   % &lt;&lt;Edit metadata to suit model</span>
                <span class="string">'Description'</span>,{<span class="string">'Variable 1'</span>,<span class="string">'Variable 2'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'m/s'</span>,<span class="string">'m/s'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Plot label 1'</span>,<span class="string">'Plot label 2'</span>},<span class="keyword">...</span>
                <span class="string">'QCflag'</span>,{<span class="string">'model'</span>,<span class="string">'model'</span>}); 
            dsp.Row = struct(<span class="keyword">...</span>
                <span class="string">'Name'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'h'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">'dd-MM-uuuu HH:mm:ss'</span>});        
            dsp.Dimensions = struct(<span class="keyword">...</span><span class="comment">    </span>
                <span class="string">'Name'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">''</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">''</span>});  
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="keyword">end</span>

</pre><h2 id="7">Input parameters</h2><p>For each set of <i>input parameters</i>, define a classname and edit the template where indicated using the classname. Define the <i>input parameters</i> required in the properties block and provide a description (used in the input UI) for each parameter as a cell array of strings in the PropertyLabels property.</p><pre class="language-matlab">
<span class="keyword">classdef</span> ParamInput_template &lt; muiPropertyUI                 <span class="comment">% &lt;&lt; Edit to classname</span>
<span class="comment">%</span>
<span class="comment">%-------class help------------------------------------------------------===</span>
<span class="comment">% NAME</span>
<span class="comment">%   PropsInput_template.m</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Class for input parameters for some component of the UI application</span>
<span class="comment">% USAGE</span>
<span class="comment">%   obj = PamamInput_template.setParamInput(mobj); %mobj is a handle to Main UI</span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   inherits muiPropertyUI</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jan 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%      </span>
    <span class="keyword">properties</span> (Hidden)
        <span class="comment">%abstract properties in muiPropertyUI to define input parameters</span>
        PropertyLabels = {<span class="string">'Parameter 1 short description'</span>,<span class="keyword">...</span><span class="comment"> % &lt;&lt; Edit to property descriptions</span>
                          <span class="string">'Parameter 2 short description'</span>,<span class="keyword">...</span>
                          <span class="string">'etc'</span>};
        <span class="comment">%abstract properties in muiPropertyUI for tab display</span>
        TabDisplay   <span class="comment">%structure defines how the property table is displayed </span>
    <span class="keyword">end</span>
    
    <span class="keyword">properties</span>
        Parameter_1                <span class="comment">%definition of parameter 1  % &lt;&lt; Edit to property names</span>
        Parameter_2                <span class="comment">%definition of parameter 2</span>
        etc   <span class="comment">%there should be as many properties as labels</span>
    <span class="keyword">end</span>    

<span class="comment">%%   </span>
    <span class="keyword">methods</span> (Access=protected)
        <span class="keyword">function</span> obj = ParamInput_template(mobj)             <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%constructor code:            </span>
            <span class="comment">%values defined in UI function setTabProperties used to assign</span>
            <span class="comment">%the tabname and position on tab for the data to be displayed</span>
            classname = metaclass(obj).Name;
            obj = setTabProps(obj,mobj,classname);  <span class="comment">%muiPropertyUI fcn</span>
            
            <span class="comment">%to use non-numeric entries then one can either pre-assign </span>
            <span class="comment">%the values in properties defintion, above, or specity the </span>
            <span class="comment">%PropertyType as a cell array, e.g.:</span>
            <span class="comment">% obj.PropertyType = [{'datetime','string','logical'},...</span>
            <span class="comment">%                                       repmat({'double'},1,8)];</span>
        <span class="keyword">end</span> 
    <span class="keyword">end</span>
<span class="comment">%%  </span>
    <span class="keyword">methods</span> (Static)  
        <span class="keyword">function</span> obj = setParamInput(mobj,editflag)
            <span class="comment">%gui for user to set Parameter Input values</span>
            classname = <span class="string">'ParamInput_template'</span>;               <span class="comment">% &lt;&lt;Edit to classname</span>
            <span class="keyword">if</span> isfield(mobj.Inputs,classname) &amp;&amp; <span class="keyword">...</span>
                            isa(mobj.Inputs.(classname),classname)
                obj = mobj.Inputs.(classname);  
            <span class="keyword">else</span>
                obj = ParamInput_template(mobj);             <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="keyword">end</span>
            <span class="comment">%use muiPropertyUI function to generate UI</span>
            <span class="keyword">if</span> nargin&lt;2 || editflag
                <span class="comment">%add nrec to limit length of props UI (default=12)</span>
                obj = editProperties(obj);  
                <span class="comment">%add any additional manipulation of the input here</span>
            <span class="keyword">end</span>
            mobj.Inputs.(classname) = obj;
        <span class="keyword">end</span>     
    <span class="keyword">end</span>
<span class="comment">%%        </span>
        <span class="comment">%add other functions to operate on properties as required   </span>
<span class="keyword">end</span>

</pre><h2 id="8">Models</h2><p>For each <i>model</i> to be included, define a classname and edit the template where indicated using the classname. In the sections of the template indicated as Model code and Assing model output, edit to suit the needs of the application. The Q-Plot tab display a fixed format plot of the model output. This can use the default format or be customised in the tabPlot function.</p><pre class="language-matlab">
<span class="keyword">classdef</span> Model_template &lt; muiDataSet                         <span class="comment">% &lt;&lt; Edit to classname</span>
<span class="comment">%</span>
<span class="comment">%-------class help------------------------------------------------------</span>
<span class="comment">% NAME</span>
<span class="comment">%   Model_template.m</span>
<span class="comment">% PURPOSE</span>
<span class="comment">%   Class description - Class for Model XXXXX to be run as a ModelUI app</span>
<span class="comment">%</span>
<span class="comment">% SEE ALSO</span>
<span class="comment">%   muiDataSet</span>
<span class="comment">%</span>
<span class="comment">% Author: Ian Townend</span>
<span class="comment">% CoastalSEA (c) Jan 2021</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">%     </span>
    <span class="keyword">properties</span>
        <span class="comment">%inherits Data, RunParam, MetaData and CaseIndex from muiDataSet</span>
        <span class="comment">%Additional properties:     </span>
    <span class="keyword">end</span>
    
    <span class="keyword">methods</span> (Access = private)
        <span class="keyword">function</span> obj = Model_template()                      <span class="comment">% &lt;&lt; Edit to classname</span>
            <span class="comment">%class constructor</span>
        <span class="keyword">end</span>
    <span class="keyword">end</span>      
<span class="comment">%%</span>
    <span class="keyword">methods</span> (Static)        
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Model implementation</span>
<span class="comment">%--------------------------------------------------------------------------         </span>
        <span class="keyword">function</span> obj = runModel(mobj)
            <span class="comment">%function to run a simple 2D diffusion model</span>
            obj = Model_template;                            <span class="comment">% &lt;&lt; Edit to classname</span>
            dsp = modelDSproperties(obj);
            
            <span class="comment">%now check that the input data has been entered</span>
            <span class="comment">%isValidModel checks the InputHandles defined in ModelUI</span>
            <span class="keyword">if</span> ~isValidModel(mobj, metaclass(obj).Name)  
                warndlg(<span class="string">'Use Setup to define model input parameters'</span>);
                <span class="keyword">return</span>;
            <span class="keyword">end</span>
            <span class="comment">%assign the run parameters to the model instance</span>
            setRunParam(obj,mobj); 
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Model code  &lt;&lt;INSERT MODEL CODE or CALL MODEL&gt;&gt;</span>
<span class="comment">%--------------------------------------------------------------------------</span>
            inp = mobj.Inputs.PropsInput_template_1;         <span class="comment">% &lt;&lt;Edit to suit model</span>
            run = mobj.Inputs.PropsInput_template_2;
            [results,xy,modeltime] = your_model(inp,run);
            <span class="comment">%now assign results to object properties  </span>
            modeltime = seconds(modeltime);  <span class="comment">%durataion data for rows </span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Assign model output to a dstable using the defined dsproperties meta-data</span>
<span class="comment">%--------------------------------------------------------------------------                   </span>
            <span class="comment">%each variable should be an array in the 'results' cell array</span>
            <span class="comment">%if model returns single variable as array of doubles, use {results}</span>
            dst = dstable(results,<span class="string">'RowNames'</span>,modeltime,<span class="string">'DSproperties'</span>,dsp);
            dst.Dimensions.X = xy{:,1};     <span class="comment">%grid x-coordinate</span>
            dst.Dimensions.Y = xy{:,2};     <span class="comment">%grid y-coordinate</span>
<span class="comment">%--------------------------------------------------------------------------</span>
<span class="comment">% Save results</span>
<span class="comment">%--------------------------------------------------------------------------                        </span>
            <span class="comment">%assign metadata about model</span>
            dst.Source = metaclass(obj).Name;
            dst.MetaData = <span class="string">'Any additional information to be saved'</span>;
            <span class="comment">%save results</span>
            setDataRecord(obj,mobj.Cases,dst,<span class="string">'model'</span>);
            getdialog(<span class="string">'Run complete'</span>);
            mobj.DrawMap;
        <span class="keyword">end</span>
    <span class="keyword">end</span>
<span class="comment">%%</span>
    <span class="keyword">methods</span>
        <span class="keyword">function</span> tabPlot(obj,src) <span class="comment">%abstract class for muiDataSet</span>
            <span class="comment">%generate plot for display on Q-Plot tab</span>
            
            <span class="comment">%add code to define plot format or call default tabplot using:</span>
            tabDSplot(obj,src);
        <span class="keyword">end</span>
    <span class="keyword">end</span> 
<span class="comment">%%    </span>
    <span class="keyword">methods</span> (Access = private)
        <span class="keyword">function</span> dsp = modelDSproperties(~) 
            <span class="comment">%define a dsproperties struct and add the model metadata</span>
            dsp = struct(<span class="string">'Variables'</span>,[],<span class="string">'Row'</span>,[],<span class="string">'Dimensions'</span>,[]); 
            <span class="comment">%define each variable to be included in the data table and any</span>
            <span class="comment">%information about the dimensions. dstable Row and Dimensions can</span>
            <span class="comment">%accept most data types but the values in each vector must be unique</span>
            
            <span class="comment">%struct entries are cell arrays and can be column or row vectors</span>
            dsp.Variables = struct(<span class="keyword">...</span><span class="comment">                       % &lt;&lt;Edit metadata to suit model</span>
                <span class="string">'Name'</span>,{<span class="string">'Var1'</span>,<span class="string">'Var2'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'Variable 1'</span>,<span class="string">'Variable 2'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'m/s'</span>,<span class="string">'m/s'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Plot label 1'</span>,<span class="string">'Plot label 2'</span>},<span class="keyword">...</span>
                <span class="string">'QCflag'</span>,{<span class="string">'model'</span>,<span class="string">'model'</span>}); 
            dsp.Row = struct(<span class="keyword">...</span>
                <span class="string">'Name'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'Time'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'s'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'Time (s)'</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">'s'</span>});        
            dsp.Dimensions = struct(<span class="keyword">...</span><span class="comment">    </span>
                <span class="string">'Name'</span>,{<span class="string">'X'</span>,<span class="string">'Y'</span>},<span class="keyword">...</span>
                <span class="string">'Description'</span>,{<span class="string">'X co-ordinate'</span>,<span class="string">'Y co-ordinate'</span>},<span class="keyword">...</span>
                <span class="string">'Unit'</span>,{<span class="string">'m'</span>,<span class="string">'m'</span>},<span class="keyword">...</span>
                <span class="string">'Label'</span>,{<span class="string">'X co-ordinate (m)'</span>,<span class="string">'Y co-ordinate (m)'</span>},<span class="keyword">...</span>
                <span class="string">'Format'</span>,{<span class="string">'-'</span>,<span class="string">'-'</span>});  
        <span class="keyword">end</span>
    <span class="keyword">end</span>    
<span class="keyword">end</span>

</pre><p>At the bottom of the template is the dataDSproperties function. This must be edited to match the data being loaded. Working out the details of the fomrat of the data being loaded helps to ensure that the data is being formatted correctly and defining the metadata defined by the dsproperties stuct ensures that the meta-data is avaialble for subsequent use of the data in plotting, statical analysis, etc.</p><h2 id="10">See Also</h2><p><a href="matlab:doc('modelui_examples')">Examples</a> of using the interface for different applications <a href="br">br</a> <a href="matlab:doc('dstoolbox')">dstoolbox</a> documentation for details of <i>dstable</i> and <i>dsproperties</i>. <a href="br">br</a> <a href="matlab:doc('muitoolbox')">muitoolbox</a> documentation for details of the <i>muiModelUI</i> abstract interface class and the other UIs used in <i>ModelUI</i>.</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2020b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% ModelUI - Getting Started
% The steps below outline how to setup a bespoke application of ModelUI
% by modifying the default UI. How to develop more complex UIs is explained
% in the <matlab:open_manual ModelUI manual>.
%%
% # Decide on what components are needed. These might include: <br>
%   o UI - the main interface for the application  <br>
%   o Data import - load different types of data <br>
%   o Input parameters - define any parameters needed for the application <br>
%   o Model(s) - initialise and call any models to be run by the application.  <br>
% # Give names to each component, e.g.: <br>
%   ModelUI, demoData, demoProps, demoModel
% # Copy the class templates for the components from here to your working folder
% # Create classes for each component by editing the templates as set out for each template below.
%

%%
% Templates for the four main components are provided in the ModelUI/utils
% folder. The templates provide the code for each component and the comments
% highlight where the files need to be edited to adapt the templates to 
% a different application.
%

%% Main UI
% Define a classname that reflects the intended application. In the setMUI
% method define the components of the application, such as the model and input
% parameter classes used that define the ModelInputs property and the
% plottig and statistics options to include in the respective UIs. The
% setTabProperties method has to be edited to match the class names for the
% parameter inputs and the position for each parameter set on the tab. Finally, 
% the calls to input classes and to run the model need to be edited to the 
% class and method names to be used .
%
% <include>../utils/UseModelUI_template.m</include>
%
%%
% For bespoke implementations of the muiModelUI interface use the
% UseUI_template.m instead (there are important differences in the class 
% constructor method).

%% Data import
% For each type of _data_ to be imported, define a classname and edit the
% template where indicated using the classname. The classname can be
% generic (e.g. Waves) and the meta-data can be modified to reflect
% variation in data from different sources (number of variables, file
% format, etc). This is used extensively in the ModelUI CoastalTools App.
% In the template provided, edit the call to dstable (line 46) and the file format defined in
% readInputData (line 67) to match the data being loaded. The Q-Plot tab
% displays a fixed format plot of the data. This can use the default format
% or be customised in the tabPlot function.
%%
% At the bottom of the template is the dataDSproperties function. This must
% be edited to match the data being loaded. Working out the details of the
% fomrat of the data being loaded helps to ensure that the data is being
% formatted correctly and defining the metadata defined by the dsproperties
% stuct ensures that the meta-data is avaialble for subsequent use of the
% data in plotting, statical analysis, etc.
%
% <include>../utils/DataImport_template.m</include>
%
%% Input parameters
% For each set of _input parameters_, define a classname and edit the
% template where indicated using the classname. Define the _input
% parameters_ required in the properties block and provide a description 
% (used in the input UI) for each parameter as a cell array of strings in 
% the PropertyLabels property.
%
% <include>../utils/ParamInput_template.m</include>
%
%% Models
% For each _model_ to be included, define a classname and edit the
% template where indicated using the classname. In the sections of the
% template indicated as Model code and Assing model output, edit to suit
% the needs of the application. The Q-Plot tab display a fixed format plot
% of the model output. This can use the default format or be customised in 
% the tabPlot function.
%
% <include>../utils/Model_template</include>
%
%%
% At the bottom of the template is the dataDSproperties function. This must
% be edited to match the data being loaded. Working out the details of the
% fomrat of the data being loaded helps to ensure that the data is being
% formatted correctly and defining the metadata defined by the dsproperties
% stuct ensures that the meta-data is avaialble for subsequent use of the
% data in plotting, statical analysis, etc.	

%% See Also
% <matlab:doc('modelui_examples') Examples> of using the interface for
% different applications <br>
% <matlab:doc('dstoolbox') dstoolbox> documentation for details of 
% _dstable_ and _dsproperties_. <br>
% <matlab:doc('muitoolbox') muitoolbox> documentation for details of the
% _muiModelUI_ abstract interface class and the other UIs used in _ModelUI_.






##### SOURCE END #####
--></body></html>